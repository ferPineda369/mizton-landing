<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Verificar IDs Únicos</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="bg-light">
    <div class="container mt-5">
        <div class="row justify-content-center">
            <div class="col-md-8">
                <div class="card">
                    <div class="card-header">
                        <h5><i class="fas fa-search"></i> Verificación de IDs Únicos</h5>
                    </div>
                    <div class="card-body">
                        <button class="btn btn-primary" onclick="checkDuplicateIds()">
                            <i class="fas fa-play"></i> Verificar IDs
                        </button>
                        
                        <div id="results" class="mt-3"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        function checkDuplicateIds() {
            const resultsDiv = document.getElementById('results');
            
            // Obtener todos los elementos con ID
            const allElements = document.querySelectorAll('[id]');
            const idCounts = {};
            const duplicates = [];
            
            // Contar ocurrencias de cada ID
            allElements.forEach(element => {
                const id = element.id;
                if (idCounts[id]) {
                    idCounts[id]++;
                } else {
                    idCounts[id] = 1;
                }
            });
            
            // Encontrar duplicados
            Object.keys(idCounts).forEach(id => {
                if (idCounts[id] > 1) {
                    duplicates.push({
                        id: id,
                        count: idCounts[id],
                        elements: document.querySelectorAll(`#${id}`)
                    });
                }
            });
            
            // Mostrar resultados
            let html = '<div class="alert alert-info">';
            html += `<h6><i class="fas fa-info-circle"></i> Resultados de Verificación</h6>`;
            html += `<p>Total de elementos con ID: <strong>${allElements.length}</strong></p>`;
            html += `<p>IDs únicos: <strong>${Object.keys(idCounts).length}</strong></p>`;
            html += '</div>';
            
            if (duplicates.length > 0) {
                html += '<div class="alert alert-danger">';
                html += `<h6><i class="fas fa-exclamation-triangle"></i> IDs Duplicados Encontrados (${duplicates.length})</h6>`;
                html += '<ul>';
                duplicates.forEach(dup => {
                    html += `<li><strong>${dup.id}</strong> - ${dup.count} ocurrencias</li>`;
                });
                html += '</ul>';
                html += '</div>';
            } else {
                html += '<div class="alert alert-success">';
                html += '<h6><i class="fas fa-check"></i> ¡Perfecto!</h6>';
                html += '<p>No se encontraron IDs duplicados. Todos los IDs son únicos.</p>';
                html += '</div>';
            }
            
            // Mostrar lista de todos los IDs
            html += '<div class="alert alert-secondary">';
            html += '<h6><i class="fas fa-list"></i> Todos los IDs encontrados:</h6>';
            html += '<div class="row">';
            Object.keys(idCounts).sort().forEach((id, index) => {
                if (index % 3 === 0 && index > 0) html += '</div><div class="row">';
                html += `<div class="col-md-4"><code>${id}</code></div>`;
            });
            html += '</div></div>';
            
            resultsDiv.innerHTML = html;
        }
        
        // Ejecutar automáticamente al cargar
        window.onload = function() {
            checkDuplicateIds();
        };
    </script>
</body>
</html>
